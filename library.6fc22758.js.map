{"mappings":"kpBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,KCnBTE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,uMCIzDH,EAAA,S,uDCJAA,EAAA,S,MCAAI,EAAiB,IAAAC,IAAoBL,EAAA,SAAAM,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,WCKrF,SAASC,EAAoBC,GAClC,MAAMC,YAAEA,EAAWC,MAAEA,EAAKC,UAAEA,EAASC,aAAEA,EAAYC,aAAEA,EAAYpB,GAAEA,GACjEe,EACF,IAAIM,EAAS,sCAAcL,IAEvBM,EAAc,GAAGH,EAAaI,MAAM,EAAG,KAKzCF,EADEL,GAuDN,SAAmBK,GACjB,IAAIG,EAAS,IAAIC,MACjBD,EAAOE,iBAAiB,QAAQ,KAAM,IACtCF,EAAOE,iBAAiB,SAAS,KAAM,IACvCF,EAAOG,IAAMN,C,CA3DMO,CAAUP,GAClB,sCAAcL,IAEd,GAAGa,EAAAtB,KAITY,IACHG,EAAc,KAKU,MAApBQ,EAAYZ,EAAUa,MAAM,KAClC,IAAIC,EAAS,GAETF,EAAU/B,OAAS,GACrBiC,EAAOC,KAAKH,EAAU,IACtBE,EAAOC,KAAKH,EAAU,IACtBE,EAAOC,KAAK,SACZC,QAAQC,IAAI,UAAWH,IACO,IAArBF,EAAU/B,QACnBiC,EAAOC,KAAKH,EAAU,IACtBE,EAAOC,KAAKH,EAAU,IACtBI,QAAQC,IAAI,UAAWH,IACO,IAArBF,EAAU/B,SACnBiC,EAAOC,KAAKH,EAAU,IACtBI,QAAQC,IAAI,UAAWH,IAKzB,MACMI,EADsBC,OAAOjB,GACUkB,QAAQ,GAkBrD,MAfe,mDAC8BtC,0BAE/BqB,yBAA8BJ,mDAAuDjB,yGAEjDA,qCAAsCiB,0DACjDe,EAAOO,KACxC,oCAC8BjB,uCAAiDc,6C,+BFpDvF,MAAMI,EAAeC,SAASC,cAAc,4BACtCC,EAAaF,SAASC,cAAc,0BACpCE,EAAcH,SAASC,cAAc,eA0CpC,SAASG,KACd,EAAAC,EAAAC,gBAEA,MAAMC,EAAeC,EAAY,gBACjC,QAAqBC,IAAjBF,EAKF,OAJAJ,EAAYO,UACV,mGACCC,WAAQN,EAAAO,YAAa,KAI1B,GAA4B,IAAxBL,EAAajD,OAKf,OAJA6C,EAAYO,UACV,mGACCC,WAAQN,EAAAO,YAAa,KAK1B,MAAMC,EAAcN,EACjBO,KAAIxC,GACID,EAAoBC,KAE5BwB,KAAK,IACRK,EAAYO,UAAYG,EACxBF,WAAWN,EAAAO,YAAa,I,CAGnB,SAASG,KACd,EAAAV,EAAAC,gBAEA,MAAMU,EAAaR,EAAY,cAE/B,QAAmBC,IAAfO,EAKF,OAJAb,EAAYO,UACV,yGACAC,WAASN,EAAAO,YAAa,KAI1B,GAA0B,IAAtBI,EAAW1D,OAKb,OAJA6C,EAAYO,UACV,yGACFC,WAAWN,EAAAO,YAAa,KAK1B,MAAMC,EAAcG,EACjBF,KAAIxC,GACID,EAAoBC,KAE5BwB,KAAK,IACRK,EAAYO,UAAYG,EAExBF,WAAWN,EAAAO,YAAa,I,CAO1B,SAASJ,EAAYS,GACnB,IACE,MAAMC,EAAkBC,aAAaC,QAAQH,GAC7C,GAAwB,OAApBC,EAA0B,OAC9B,OAAOtD,KAAKC,MAAMqD,E,CAElB,MAAOG,GACP5B,QAAQC,IAAI,0CAA2C2B,EAAMC,Q,GA3G5CC,iBACnB,IAAIC,EAAUC,KAAKC,KAAK,GACpBC,EAAUF,KAAKG,MAAM,KACrBC,EAAOJ,KAAKG,MAAMH,KAAKK,UAAYH,EAAUH,EAAU,GAAKA,GAEhE,IACE,MAAMO,EAAW,sCACjB5B,EAAYO,UAAY,GACxB,MAAMsB,QAAc,EAAAC,EAAAC,SAAkBL,GAIhCM,EAAS,wJAAwJH,EAAMI,QAAQ,GAAG7E,WAAWwE,IAAWC,EAAMI,QAAQ,GAAG7D,qEAC7KyD,EAAMI,QAAQ,GAAG5D,+DACpBwD,EAAMI,QAAQ,GAAGC,oIAGyBN,IAAWC,EAAMI,QAAQ,GAAG7D,wBAAwByD,EAAMI,QAAQ,GAAG7E,6DAC5GyE,EAAMI,QAAQ,GAAG5D,+DACpBwD,EAAMI,QAAQ,GAAGC,oIAGyBN,IAAWC,EAAMI,QAAQ,GAAG7D,wBAAwByD,EAAMI,QAAQ,GAAG7E,6DAC5GyE,EAAMI,QAAQ,GAAG5D,+DACpBwD,EAAMI,QAAQ,GAAGC,iCAIhElC,EAAYO,UAAYyB,C,CACxB,MAAOd,GACP5B,QAAQC,IAAI2B,E,EAIhBiB,GA8DAvC,EAAad,iBAAiB,QAASmB,GACvCF,EAAWjB,iBAAiB,QAAS8B,G,8CG5GrC,IAAAwB,EAAA7E,EAAA,S,6DAUA,MAAM8E,gBACJC,EAAeC,MACfC,EAAKC,SACLC,EAAQC,SACRC,EAAQC,WACRC,EAAUC,KACVC,EAAIC,eACJC,GACEd,EAAAe,KAEwE,IAAxEC,EAAQ3F,KAAKC,MAAMsD,aAAaC,QAAQ,gBAAkB,GAC1DoC,EAAU5F,KAAKC,MAAMsD,aAAaC,QAAQ,kBAAoB,GAS3DG,eAAekC,EAAUC,GAC9B,GAA0B,QAAtBA,EAAEC,OAAOC,UAA4C,SAAtBF,EAAEC,OAAOC,SAAqB,CAC/DjB,EAAMkB,UAAUC,OAAO,sBACvBjB,EAASgB,UAAUC,OAAO,sBAC1BjB,EAASgB,UAAUE,IAAI,mBAGvBV,EAAeW,oBAAoB,QAASP,GAE5CzD,SAASf,iBAAiB,UAAWgF,GACrClB,EAAS9D,iBAAiB,QAASiF,GACnCrB,EAAS5D,iBAAiB,QAASkF,GAEnC,MAAM5G,EACkB,QAAtBmG,EAAEC,OAAOC,SACLF,EAAEC,OAAOS,QAAQ7G,GACjBmG,EAAEC,OAAOU,QAAQ,MAAMD,QAAQ7G,SAuCzCgE,eAA2BhE,GACzB,MAAM+G,EA7DR,WACE,MAAMC,EAA2BpD,aAAaC,QAAQ,mBAEtD,OADsBxD,KAAKC,MAAM0G,E,CA2DbC,GACdC,QAAiB,EAAAC,EAAAC,aAAYL,EAAa/G,EAAIiG,EAASD,GAE7DN,EAAWvC,UAAY+D,C,CA1CfG,CAAYrH,GAClB,MAAMsH,EAAMC,OAAOC,QACnB5B,EAAK6B,MAAMC,SAAW,QACtB9B,EAAK6B,MAAMH,IAAM,IAAIA,MAEkB,MAAjCK,EAAalF,SAASC,cAAc,uBACpCkF,EAAWnF,SAASC,cAAc,qBAClCmF,EAAkBpF,SAASC,cAC/B,mCAEFiF,EAAWjG,iBAAiB,QAASoG,GACrCF,EAASlG,iBAAiB,QAASqG,GACnCF,EAAgBnG,iBAAiB,QAASsG,EAAAC,kB,EAG9C,SAASrB,EAAmBT,GACtBA,EAAE+B,gBAAkB/B,EAAEC,QAAQO,G,CAEpC,SAASD,EAAgBP,GACR,WAAXA,EAAEgC,MAAmBxB,G,CAE3B,SAASA,IACPvB,EAAMkB,UAAUE,IAAI,sBACpBlB,EAASgB,UAAUE,IAAI,sBACvBlB,EAASgB,UAAUC,OAAO,mBAG1BT,EAAepE,iBAAiB,QAASwE,GAEzCzD,SAASgE,oBAAoB,UAAWE,GACxCnB,EAASiB,oBAAoB,QAASE,GACtCrB,EAASmB,oBAAoB,QAASG,GACtC,MAAMU,EAAM1B,EAAK6B,MAAMH,IACvB1B,EAAK6B,MAAMC,SAAW,GACtB9B,EAAK6B,MAAMH,IAAM,GACjBC,OAAOa,SAAS,GAA0B,EAAvBC,SAASf,GAAO,K,CAUrCtD,eAAe8D,EAAc3B,GAC3B,MAAMmC,EAAU7F,SAASC,cAAc,sBACjC3B,EAAQ,CACZC,YAAasH,EAAQzB,QAAQxF,OAC7BJ,MAAOqH,EAAQzB,QAAQ5F,MACvBC,UAAWoH,EAAQzB,QAAQ7E,OAC3Bb,aAAcmH,EAAQzB,QAAQ0B,KAC9BnH,aAAckH,EAAQzB,QAAQ2B,MAC9BxI,GAAIsI,EAAQzB,QAAQ7G,IAEhByI,EAAcxC,EAAQyC,MAAKC,GAAQA,EAAK3I,KAAOe,EAAMf,KAE3D,GADAkC,QAAQ0G,IAAIzC,EAAEC,QACa,mBAAvBD,EAAEC,OAAOyC,WACX,IAAKJ,EAAa,CAChBxC,EAAQhE,KAAKlB,GACb6C,aAAakF,QAAQ,eAAgBzI,KAAK0I,UAAU9C,IACpDE,EAAEC,OAAOyC,UAAY,sBACPxI,KAAKC,MAAMsD,aAAaC,QAAQ,iBAG9ChB,IACAhB,EAAAmH,GAASC,OAAOC,QAAQ,oB,MAEM,wBAAvB/C,EAAEC,OAAOyC,YAClB5C,EAAUA,EAAQkD,QAAOR,GAAQA,EAAK3I,KAAOe,EAAMf,KACnD4D,aAAakF,QAAQ,eAAgBzI,KAAK0I,UAAU9C,IACpDE,EAAEC,OAAOyC,UAAY,iBACrBhG,IAIAhB,EAAAmH,GAASC,OAAOC,QAAQ,yB,CAG5BlF,eAAe+D,EAAa5B,GAC1B,MAAMmC,EAAU7F,SAASC,cAAc,sBACjC3B,EAAQ,CACZC,YAAasH,EAAQzB,QAAQxF,OAC7BJ,MAAOqH,EAAQzB,QAAQ5F,MACvBC,UAAWoH,EAAQzB,QAAQ7E,OAC3Bb,aAAcmH,EAAQzB,QAAQ0B,KAC9BnH,aAAckH,EAAQzB,QAAQ2B,MAC9BxI,GAAIsI,EAAQzB,QAAQ7G,IAEhBoJ,EAAapD,EAAM0C,MAAKC,GAAQA,EAAK3I,KAAOe,EAAMf,KACxDkC,QAAQ0G,IAAIzC,EAAEC,QACa,iBAAvBD,EAAEC,OAAOyC,UACNO,IACHpD,EAAM/D,KAAKlB,GACX6C,aAAakF,QAAQ,aAAczI,KAAK0I,UAAU/C,IAClDG,EAAEC,OAAOyC,UAAY,oBAGrBrF,IACA3B,EAAAmH,GAASC,OAAOC,QAAQ,oBAEM,sBAAvB/C,EAAEC,OAAOyC,YAClB7C,EAAQA,EAAMmD,QAAOR,GAAQA,EAAK3I,KAAOe,EAAMf,KAC/C4D,aAAakF,QAAQ,aAAczI,KAAK0I,UAAU/C,IAClDG,EAAEC,OAAOyC,UAAY,eACrBrF,IAGA3B,EAAAmH,GAASC,OAAOC,QAAQ,uB,CApI5BpD,EAAepE,iBAAiB,QAASwE,G,YClBzC,EAAApD,EAAAC,gBACAK,WAAWN,EAAAO,YAAa","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-b481c97bc47fe1ba.js","src/js/authFireBaseLibrary.js","src/js/my-library-watched-queue/my-library-watched-queue.js","node_modules/@parcel/runtime-js/lib/runtime-9004501e1c6ca5ca.js","src/js/my-library-watched-queue/renderMoviesLibrary.js","src/js/movie_modal-library.js","src/library.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"1zJhX\\\":\\\"library.6fc22758.js\\\",\\\"ej0t2\\\":\\\"empty-poster.88e9f0bc.jpg\\\",\\\"5UbS1\\\":\\\"index.432e5489.css\\\",\\\"eM9ss\\\":\\\"library.6a81601c.js\\\"}\"));","\n\n\n//////////////////////////////////\nimport { initializeApp } from \"firebase/app\"\nimport {\n    getAuth, signInWithEmailAndPassword,\n    createUserWithEmailAndPassword, AuthErrorCodes, onAuthStateChanged, signOut\n} from 'firebase/auth'\nimport 'notiflix/dist/notiflix-3.2.6.min.css';\nimport Notiflix from 'notiflix';\n\nimport { getDatabase, ref, set, child, get, push, update } from \"firebase/database\"\n\nlet currentUID = \"\";\nimport { auth } from \"./authFireBase.js\"\n//btn header switch\n\n\n\n\n\n","import Notiflix from 'notiflix';\nimport { renderMoviesLibrary } from './renderMoviesLibrary';\nimport { userDataQueue, userDataWatched } from './data-template-local-storage';\nimport { spinnerStart, spinnerStop } from '../loader';\nimport fetchPopularFilms from '../trending-search-main/fetch-movies';\n\nconst watchedBtnEl = document.querySelector('.js-library-btn--watched');\nconst queueBtnEl = document.querySelector('.js-library-btn--queue');\nconst movieListEl = document.querySelector('.movie-list');\n\n// --–¥–µ—Ñ–æ–ª—Ç —ñ–Ω—Ñ–∞ –≤ –±—ñ–±–ª—ñ–æ—Ç–µ—Ü—ñ\n\nasync function defaultLibrary() {\n  let minPage = Math.ceil(1);\n  let maxPage = Math.floor(100);\n  let page = Math.floor(Math.random() * (maxPage - minPage + 1) + minPage);\n\n  try {\n    const IMG_PATH = 'https://image.tmdb.org/t/p/original';\n    movieListEl.innerHTML = '';\n    const films = await fetchPopularFilms(page);\n\n    // console.log(films.results);\n\n    const markup = `<h3 class='library-gallery-recomend'>RECOMMENDATIONS</h3><div class='library-gallery__default'><img class='library-gallery__default-poster' data-id='${films.results[1].id}' src=${IMG_PATH}${films.results[1].poster_path}>\n    <div><p class='library-gallery__default__title'>${films.results[1].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[1].overview}</p></div>\n    </div>\n    \n    <div class='library-gallery__default'><img class='library-gallery__default-poster' src=${IMG_PATH}${films.results[2].poster_path} data-id='${films.results[2].id}'>\n    <div><p class='library-gallery__default__title'>${films.results[2].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[2].overview}</p></div>\n    </div>\n    \n    <div class='library-gallery__default'><img class='library-gallery__default-poster' src=${IMG_PATH}${films.results[3].poster_path} data-id='${films.results[3].id}'>\n    <div><p class='library-gallery__default__title'>${films.results[3].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[3].overview}</p></div>\n    </div>`;\n    // console.log(markup);\n\n    movieListEl.innerHTML = markup;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\ndefaultLibrary();\n// --/–¥–µ—Ñ–æ–ª—Ç —ñ–Ω—Ñ–∞ –≤ –±—ñ–±–ª—ñ–æ—Ç–µ—Ü—ñ\n\n// –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –Ω–∞ Watched\nexport function onWatchedBtnClick() {\n  spinnerStart();\n\n  const movieWatched = gettingItem('movieWatched');\n  if (movieWatched === undefined) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>It seems you haven't watched any movie. You should try, it's funüé≠</p>\";\n    setTimeout(spinnerStop, 500);\n\n    return;\n  }\n  if (movieWatched.length === 0) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>It seems you haven't watched any movie. You should try, it's funüé≠</p>\";\n    setTimeout(spinnerStop, 500);\n\n    return;\n  }\n\n  const moviesCards = movieWatched\n    .map(movie => {\n      return renderMoviesLibrary(movie);\n    })\n    .join('');\n  movieListEl.innerHTML = moviesCards;\n  setTimeout(spinnerStop, 500);\n}\n\nexport function onQueueBtnClick() {\n  spinnerStart();\n\n  const movieQueue = gettingItem('movieQueue');\n\n  if (movieQueue === undefined) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>The queue is empty. Add all Harry Potter movies - you won't regret this‚ú®</p>\";\n    setTimeout(spinnerStop, 500);\n\n    return;\n  }\n  if (movieQueue.length === 0) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>The queue is empty. Add all Harry Potter movies - you won't regret this‚ú®</p>\";\n    setTimeout(spinnerStop, 500);\n\n    return;\n  }\n\n  const moviesCards = movieQueue\n    .map(movie => {\n      return renderMoviesLibrary(movie);\n    })\n    .join('');\n  movieListEl.innerHTML = moviesCards;\n\n  setTimeout(spinnerStop, 500);\n}\n\nwatchedBtnEl.addEventListener('click', onWatchedBtnClick);\nqueueBtnEl.addEventListener('click', onQueueBtnClick);\n\n// localStorage functions\nfunction gettingItem(key) {\n  try {\n    const serializedState = localStorage.getItem(key);\n    if (serializedState === null) return undefined;\n    return JSON.parse(serializedState);\n    // return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.log('Everyone makes mistakes, this is yours:', error.message);\n  }\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"ej0t2\")).toString();","import emptyphoto from '../../images/empty-photo/empty-poster.jpg';\n// import TmdbAPI from '../TMDB_API';\n\nconst IMG_PATH = 'https://image.tmdb.org/t/p/original';\n\nexport function renderMoviesLibrary(movie) {\n  const { poster_path, title, genre_ids, release_date, vote_average, id } =\n    movie;\n  let poster = `${IMG_PATH}${poster_path}`;\n\n  let releaseDate = `${release_date.slice(0, 4)}`;\n\n  // —è–∫—â–æ –Ω–µ–º–∞—î –ø–æ—Å—Ç–µ—Ä–∞\n\n  if (poster_path || testImage(poster)) {\n    poster = `${IMG_PATH}${poster_path}`;\n  } else {\n    poster = `${emptyphoto}`;\n  }\n\n  // —è–∫—â–æ –Ω–µ–º–∞—î –¥–∞—Ç–∏ –≤–∏–ø—É—Å–∫—É\n  if (!release_date) {\n    releaseDate = `-`;\n  }\n\n  // –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∂–∞–Ω—Ä—ñ–≤\n\n  const genresArr = genre_ids.split(',');\n  let genres = [];\n  // const genresNamesToRender = getGenreDeciphered(item, genreNames);\n  if (genresArr.length > 2) {\n    genres.push(genresArr[0]);\n    genres.push(genresArr[1]);\n    genres.push('Other');\n    console.log('genres:', genres);\n  } else if (genresArr.length === 2) {\n    genres.push(genresArr[0]);\n    genres.push(genresArr[1]);\n    console.log('genres:', genres);\n  } else if (genresArr.length === 1) {\n    genres.push(genresArr[0]);\n    console.log('genres:', genres);\n  }\n\n  // /–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∂–∞–Ω—Ä—ñ–≤\n\n  const voteAverageToNumber = Number(vote_average);\n  const voteAverageFixed = voteAverageToNumber.toFixed(1);\n  // const genres = genre_ids.map(el => el.id);\n\n  const markUp = `\n\t<li class='trending-gallery__item' data-id='${id}'>\n  \n    <img src=\"${poster}\" alt=\"The poster of ${title} film\" class=\"library-gallery__image\" data-id='${id}'/>\n    <div class=\"trending-gallery__wrapper\">\n    \t<h3 class='trending-gallery__title' data-id='${id}'><span class=\"title-modal-open\">${title}</span></h3>\n    \t<p class='trending-gallery__info'>${genres.join(\n        ', '\n      )} | <span class='movie-year'>${releaseDate}</span> <span class='movie-rating'>${voteAverageFixed}</span></p>\n    </div>\n    \n  </li>\n\t`;\n\n  // console.log(markUp);\n  return markUp;\n}\n\n// -----------test\nfunction testImage(poster) {\n  let tester = new Image();\n  tester.addEventListener('load', () => true);\n  tester.addEventListener('error', () => false);\n  tester.src = poster;\n}\n// -----------test\n","// import { watchTrailer } from '../trailer';\nimport { refs } from './refs';\nimport Notiflix from 'notiflix';\nimport { renderModal } from './render_modal';\nimport { onTrailerBtnClick } from './trailer';\nimport { all, AxiosHeaders } from 'axios';\nimport { fetchMovie } from './fetch_movie_details';\nimport TmdbAPI from './TMDB_API';\nimport { onWatchedBtnClick } from './my-library-watched-queue/my-library-watched-queue';\nimport { onQueueBtnClick } from './my-library-watched-queue/my-library-watched-queue';\n\nconst {\n  allCardsSection,\n  modal,\n  overflow,\n  closeBtn,\n  innerModal,\n  body,\n  sectionLibrary,\n} = refs;\n// –ù–∞—Å—Ç—É–ø–Ω—ñ –¥–≤–∞ —Ä—è–¥–∫–∏ - –¥–æ–¥–∞–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –≤ –æ–±'—î–∫—Ç–∏ –∑ local storage –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–Ω–æ–ø–æ–∫ —ñ —Ä–æ–±–æ—Ç–∏\nlet queue = JSON.parse(localStorage.getItem('movieQueue')) || [];\nlet watched = JSON.parse(localStorage.getItem('movieWatched')) || [];\n// allCardsSection.addEventListener('click', showModal);\nsectionLibrary.addEventListener('click', showModal);\n\nfunction updateMoviesList() {\n  const allMoviesListFromStorage = localStorage.getItem('currentFilmList');\n  const allMoviesList = JSON.parse(allMoviesListFromStorage);\n  return allMoviesList;\n}\nexport async function showModal(e) {\n  if (e.target.nodeName === 'IMG' || e.target.nodeName === 'SPAN') {\n    modal.classList.remove('hidden-movie-modal');\n    overflow.classList.remove('hidden-movie-modal');\n    overflow.classList.add('overflow-height');\n\n    // allCardsSection.removeEventListener('click', showModal);\n    sectionLibrary.removeEventListener('click', showModal);\n\n    document.addEventListener('keydown', closeModalOnEsc);\n    closeBtn.addEventListener('click', closeModal);\n    overflow.addEventListener('click', closeModalOverflow);\n\n    const id =\n      e.target.nodeName === 'IMG'\n        ? e.target.dataset.id\n        : e.target.closest('li').dataset.id;\n    await createModal(id);\n    const top = window.scrollY;\n    body.style.position = 'fixed';\n    body.style.top = `-${top}px`;\n    // –î–∞–ª—ñ –≤ —Ü—ñ–π —Ñ—É–Ω–∫—Ü—ñ—ó—ó –Ω–∞–≤—ñ—Å–∏–ª–∞ –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤ –ø–æ–¥—ñ–π.\n    const watchedBtn = document.querySelector('.modal__btn-watched');\n    const queueBtn = document.querySelector('.modal__btn-queue');\n    const watchTrailerBtn = document.querySelector(\n      '.movie-modal__btn-watch-trailer'\n    );\n    watchedBtn.addEventListener('click', handleWatched);\n    queueBtn.addEventListener('click', handleQueued);\n    watchTrailerBtn.addEventListener('click', onTrailerBtnClick);\n  }\n}\nfunction closeModalOverflow(e) {\n  if (e.currentTarget === e.target) closeModal();\n}\nfunction closeModalOnEsc(e) {\n  if (e.code === 'Escape') closeModal();\n}\nfunction closeModal() {\n  modal.classList.add('hidden-movie-modal');\n  overflow.classList.add('hidden-movie-modal');\n  overflow.classList.remove('overflow-height');\n\n  // allCardsSection.addEventListener('click', showModal);\n  sectionLibrary.addEventListener('click', showModal);\n\n  document.removeEventListener('keydown', closeModal);\n  closeBtn.removeEventListener('click', closeModal);\n  overflow.removeEventListener('click', closeModalOverflow);\n  const top = body.style.top;\n  body.style.position = '';\n  body.style.top = '';\n  window.scrollTo(0, parseInt(top || '0') * -1);\n}\n\nasync function createModal(id) {\n  const currentList = updateMoviesList();\n  const rendered = await renderModal(currentList, id, watched, queue);\n\n  innerModal.innerHTML = rendered;\n}\n// –î–∞–ª—ñ —ñ –¥–æ –∫—ñ–Ω—Ü—è –π–¥—É—Ç—å –¥–≤–∞ –æ–±—Ä–æ–±–Ω–∏–∫–∏: watched i queue, —è–∫—ñ —Å–∞–º—ñ –≤–∏—Ä—ñ—à—É—é—Ç—å, –¥–æ–¥–∞–≤–∞—Ç–∏ —á–∏ –≤–∏–¥–∞–ª—è—Ç–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏\nasync function handleWatched(e) {\n  const modalEl = document.querySelector('.movie-modal__main');\n  const movie = {\n    poster_path: modalEl.dataset.poster,\n    title: modalEl.dataset.title,\n    genre_ids: modalEl.dataset.genres,\n    release_date: modalEl.dataset.date,\n    vote_average: modalEl.dataset.votes,\n    id: modalEl.dataset.id,\n  };\n  const isInWatched = watched.some(film => film.id === movie.id);\n  console.dir(e.target);\n  if (e.target.innerText === 'ADD TO WATCHED') {\n    if (!isInWatched) {\n      watched.push(movie);\n      localStorage.setItem('movieWatched', JSON.stringify(watched));\n      e.target.innerText = 'Remove from watched';\n      const saved = JSON.parse(localStorage.getItem('movieWatched'));\n      // e.target.addEventListener('click', removeFromWatched);\n      // e.target.removeEventListener('click', addToWatched);\n      onWatchedBtnClick();\n      Notiflix.Notify.success('Added to watched!');\n    }\n  } else if (e.target.innerText === 'REMOVE FROM WATCHED') {\n    watched = watched.filter(film => film.id !== movie.id);\n    localStorage.setItem('movieWatched', JSON.stringify(watched));\n    e.target.innerText = 'Add to watched';\n    onWatchedBtnClick();\n\n    // e.target.removeEventListener('click', removeFromWatched);\n    // e.target.addEventListener('click', addToWatched);\n    Notiflix.Notify.success('Removed from watched!');\n  }\n}\nasync function handleQueued(e) {\n  const modalEl = document.querySelector('.movie-modal__main');\n  const movie = {\n    poster_path: modalEl.dataset.poster,\n    title: modalEl.dataset.title,\n    genre_ids: modalEl.dataset.genres,\n    release_date: modalEl.dataset.date,\n    vote_average: modalEl.dataset.votes,\n    id: modalEl.dataset.id,\n  };\n  const isInQueued = queue.some(film => film.id === movie.id);\n  console.dir(e.target);\n  if (e.target.innerText === 'ADD TO QUEUE') {\n    if (!isInQueued) {\n      queue.push(movie);\n      localStorage.setItem('movieQueue', JSON.stringify(queue));\n      e.target.innerText = 'Remove from queue';\n      // e.target.addEventListener('click', removeFromWatched);\n      // e.target.removeEventListener('click', addToWatched);\n      onQueueBtnClick();\n      Notiflix.Notify.success('Added to queue!');\n    }\n  } else if (e.target.innerText === 'REMOVE FROM QUEUE') {\n    queue = queue.filter(film => film.id !== movie.id);\n    localStorage.setItem('movieQueue', JSON.stringify(queue));\n    e.target.innerText = 'Add to queue';\n    onQueueBtnClick();\n    // e.target.removeEventListener('click', removeFromWatched);\n    // e.target.addEventListener('click', addToWatched);\n    Notiflix.Notify.success('Removed from queue!');\n  }\n}\n","import './js/authFireBaseLibrary.js';\nimport './js/openModalWindow.js';\nimport './js/my-library-watched-queue/my-library-watched-queue';\nimport './js/dark-mode';\nimport './js/footer-modal';\nimport { spinnerStart, spinnerStop } from './js/loader';\nspinnerStart();\nsetTimeout(spinnerStop, 1000);\nimport './js/scroll_to_top';\nimport './js/movie_modal-library.js';\nimport './js/openModalWindow.js';\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$71f5c94a49cf9373$exports","URL","resolve","import","meta","url","toString","$53a437808e8e798d$export$5de0cb244a858947","movie","poster_path","title","genre_ids","release_date","vote_average","poster","releaseDate","slice","tester","Image","addEventListener","src","$53a437808e8e798d$var$testImage","$parcel$interopDefault","genresArr","split","genres","push","console","log","voteAverageFixed","Number","toFixed","join","$30dc2ddc0d4b38da$var$watchedBtnEl","document","querySelector","$30dc2ddc0d4b38da$var$queueBtnEl","$30dc2ddc0d4b38da$var$movieListEl","$30dc2ddc0d4b38da$export$852eb21c65e590aa","$gjiCh","spinnerStart","movieWatched","$30dc2ddc0d4b38da$var$gettingItem","undefined","innerHTML","setTimeout","spinnerStop","moviesCards","map","$30dc2ddc0d4b38da$export$47c64e1cb6fdbeb7","movieQueue","key","serializedState","localStorage","getItem","error","message","async","minPage","Math","ceil","maxPage","floor","page","random","IMG_PATH","films","$2Opyx","default","markup","results","overview","$30dc2ddc0d4b38da$var$defaultLibrary","$krGWQ","allCardsSection","$f9640db34d3647b8$var$allCardsSection","modal","$f9640db34d3647b8$var$modal","overflow","$f9640db34d3647b8$var$overflow","closeBtn","$f9640db34d3647b8$var$closeBtn","innerModal","$f9640db34d3647b8$var$innerModal","body","$f9640db34d3647b8$var$body","sectionLibrary","$f9640db34d3647b8$var$sectionLibrary","refs","$f9640db34d3647b8$var$queue","$f9640db34d3647b8$var$watched","$f9640db34d3647b8$export$d7e8d4d4450c819c","e","target","nodeName","classList","remove","add","removeEventListener","$f9640db34d3647b8$var$closeModalOnEsc","$f9640db34d3647b8$var$closeModal","$f9640db34d3647b8$var$closeModalOverflow","dataset","closest","currentList","allMoviesListFromStorage","$f9640db34d3647b8$var$updateMoviesList","rendered","$1jYKa","renderModal","$f9640db34d3647b8$var$createModal","top","window","scrollY","style","position","watchedBtn","queueBtn","watchTrailerBtn","$f9640db34d3647b8$var$handleWatched","$f9640db34d3647b8$var$handleQueued","$37v9V","onTrailerBtnClick","currentTarget","code","scrollTo","parseInt","modalEl","date","votes","isInWatched","some","film","dir","innerText","setItem","stringify","$7Y9D8","Notify","success","filter","isInQueued"],"version":3,"file":"library.6fc22758.js.map"}