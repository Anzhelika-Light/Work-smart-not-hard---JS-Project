{"mappings":"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","sources":["src/js/authFireBaseLibrary.js","src/js/my-library-watched-queue/my-library-watched-queue.js","src/js/movie_modal-library.js","src/library.js"],"sourcesContent":["\n\n\n//////////////////////////////////\nimport { initializeApp } from \"firebase/app\"\nimport {\n    getAuth, signInWithEmailAndPassword,\n    createUserWithEmailAndPassword, AuthErrorCodes, onAuthStateChanged, signOut\n} from 'firebase/auth'\nimport 'notiflix/dist/notiflix-3.2.6.min.css';\nimport Notiflix from 'notiflix';\n\nimport { getDatabase, ref, set, child, get, push, update } from \"firebase/database\"\n\nlet currentUID = \"\";\nimport { auth } from \"./authFireBase.js\"\n//btn header switch\n\n\n\n\n\n","import Notiflix from 'notiflix';\nimport { renderMoviesLibrary } from './renderMoviesLibrary';\n//import { userDataQueue, userDataWatched } from './data-template-local-storage';\nimport { spinnerStart, spinnerStop } from '../loader';\nimport fetchPopularFilms from '../trending-search-main/fetch-movies';\nimport { readAllUserData, currentUID, auth } from '../authFireBase.js';\nimport { async } from '@firebase/util';\n\nconst watchedBtnEl = document.querySelector('.js-library-btn--watched');\nconst queueBtnEl = document.querySelector('.js-library-btn--queue');\nconst movieListEl = document.querySelector('.movie-list');\n\n// --–¥–µ—Ñ–æ–ª—Ç —ñ–Ω—Ñ–∞ –≤ –±—ñ–±–ª—ñ–æ—Ç–µ—Ü—ñ\n\nasync function defaultLibrary() {\n  // minPage = Math.ceil(1);\n  // maxPage = Math.floor(100);\n  const minPage = 1;\n  const maxPage = 100;\n  let page = Math.floor(Math.random() * (maxPage - minPage + 1) + minPage);\n  try {\n    const IMG_PATH = 'https://image.tmdb.org/t/p/original';\n    movieListEl.innerHTML = '';\n    const films = await fetchPopularFilms(page);\n\n    // console.log(films.results);\n\n    const markup = `<h3 class='library-gallery-recomend'>RECOMMENDATIONS</h3><div class='library-gallery__default'><img class='library-gallery__default-poster' data-id='${films.results[1].id}' src=${IMG_PATH}${films.results[1].poster_path}>\n    <div><p class='library-gallery__default__title'>${films.results[1].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[1].overview}</p></div>\n    </div>\n    \n    <div class='library-gallery__default'><img class='library-gallery__default-poster' src=${IMG_PATH}${films.results[2].poster_path} data-id='${films.results[2].id}'>\n    <div><p class='library-gallery__default__title'>${films.results[2].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[2].overview}</p></div>\n    </div>\n    \n    <div class='library-gallery__default'><img class='library-gallery__default-poster' src=${IMG_PATH}${films.results[3].poster_path} data-id='${films.results[3].id}'>\n    <div><p class='library-gallery__default__title'>${films.results[3].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[3].overview}</p></div>\n    </div>`;\n    // console.log(markup);\n\n    movieListEl.innerHTML = markup;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\ndefaultLibrary();\n// --/–¥–µ—Ñ–æ–ª—Ç —ñ–Ω—Ñ–∞ –≤ –±—ñ–±–ª—ñ–æ—Ç–µ—Ü—ñ\n\n// –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –Ω–∞ Watched\nexport async function onWatchedBtnClick() {\n  spinnerStart();\n  setTimeout(spinnerStop, 500);\n  queueBtnEl.style.background = 'transparent';\n  queueBtnEl.style.borderColor = '#ffffff';\n\n  watchedBtnEl.style.background = '#ff6b01';\n  watchedBtnEl.style.borderColor = '#ff6b01';\n  if (auth.currentUser === null) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>It seems you haven't watched any movie. You should try, it's funüé≠</p>\";\n    return;\n  }\n  const movieWatched = await readAllUserData(auth.currentUser.uid);\n  if (movieWatched.userDataWatch === undefined) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>It seems you haven't watched any movie. You should try, it's funüé≠</p>\";\n\n    return;\n  }\n  // console.log(movieWatched);\n  if (Object.keys(movieWatched).length === 1) {\n    movieListEl.innerHTML =\n      \"<p>It seems you haven't watched any movie. You should try, it's funüé≠</p>\";\n    return;\n  }\n  const moviesCards = movieWatched.userDataWatch\n    .map(movie => {\n      return renderMoviesLibrary(movie);\n    })\n    .join('');\n  movieListEl.innerHTML = moviesCards;\n}\n\nexport async function onQueueBtnClick() {\n  spinnerStart();\n  setTimeout(spinnerStop, 500);\n  queueBtnEl.style.background = '#ff6b01';\n  queueBtnEl.style.borderColor = '#ff6b01';\n\n  watchedBtnEl.style.background = 'transparent';\n  watchedBtnEl.style.borderColor = '#ffffff';\n\n  if (auth.currentUser === null) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>The queue is empty. Add all Harry Potter movies - you won't regret this‚ú®</p>\";\n    return;\n  }\n  const movieQueue = await readAllUserData(auth.currentUser.uid);\n  // console.log(movieQueue);\n  if (movieQueue.userDataQueue === undefined) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>The queue is empty. Add all Harry Potter movies - you won't regret this‚ú®</p>\";\n    return;\n  }\n  if (Object.keys(movieQueue).length === 1) {\n    movieListEl.innerHTML =\n      \"<p>The queue is empty. Add all Harry Potter movies - you won't regret this‚ú®</p>\";\n    return;\n  }\n\n  const moviesCards = movieQueue.userDataQueue\n    .map(movie => {\n      return renderMoviesLibrary(movie);\n    })\n    .join('');\n  movieListEl.innerHTML = moviesCards;\n}\n\nwatchedBtnEl.addEventListener('click', onWatchedBtnClick);\nqueueBtnEl.addEventListener('click', onQueueBtnClick);\n\n// localStorage functions\n\n/*import Notiflix from 'notiflix';\nimport { renderMoviesLibrary } from './renderMoviesLibrary';\nimport { userDataQueue, userDataWatched } from './data-template-local-storage';\nimport { spinnerStart, spinnerStop } from '../loader';\nimport fetchPopularFilms from '../trending-search-main/fetch-movies';\n\nconst watchedBtnEl = document.querySelector('.js-library-btn--watched');\nconst queueBtnEl = document.querySelector('.js-library-btn--queue');\nconst movieListEl = document.querySelector('.movie-list');\n\n// --–¥–µ—Ñ–æ–ª—Ç —ñ–Ω—Ñ–∞ –≤ –±—ñ–±–ª—ñ–æ—Ç–µ—Ü—ñ\n\nasync function defaultLibrary() {\n  minPage = Math.ceil(1);\n  maxPage = Math.floor(100);\n  let page = Math.floor(Math.random() * (maxPage - minPage + 1) + minPage);\n\n  try {\n    const IMG_PATH = 'https://image.tmdb.org/t/p/original';\n    movieListEl.innerHTML = '';\n    const films = await fetchPopularFilms(page);\n\n    const markup = `<h3 class='library-gallery-recomend'>RECOMENDATIONS</h3><div class='library-gallery__default'><img class='library-gallery__default-poster' src=${IMG_PATH}${films.results[1].poster_path}>\n    <div><p class='library-gallery__default__title'>${films.results[1].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[1].overview}</p></div>\n    </div>\n    \n    <div class='library-gallery__default'><img class='library-gallery__default-poster' src=${IMG_PATH}${films.results[2].poster_path}>\n    <div><p class='library-gallery__default__title'>${films.results[2].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[2].overview}</p></div>\n    </div>\n    \n    <div class='library-gallery__default'><img class='library-gallery__default-poster' src=${IMG_PATH}${films.results[3].poster_path}>\n    <div><p class='library-gallery__default__title'>${films.results[3].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[3].overview}</p></div>\n    </div>`;\n\n    movieListEl.innerHTML = markup;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\ndefaultLibrary();\n// --/–¥–µ—Ñ–æ–ª—Ç —ñ–Ω—Ñ–∞ –≤ –±—ñ–±–ª—ñ–æ—Ç–µ—Ü—ñ\n\n// –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –Ω–∞ Watched\nfunction onWatchedBtnClick() {\n  spinnerStart();\n\n  const movieWatched = gettingItem('movieWatched');\n  if (movieWatched.length === 0) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>It seems you haven't watched any movie. You should try, it's funüé≠</p>\";\n    setTimeout(spinnerStop, 500);\n\n    return;\n  }\n  const moviesCards = movieWatched\n    .map(movie => {\n      return renderMoviesLibrary(movie);\n    })\n    .join('');\n  movieListEl.innerHTML = moviesCards;\n  setTimeout(spinnerStop, 500);\n}\n\nfunction onQueueBtnClick() {\n  spinnerStart();\n\n  const movieQueue = gettingItem('movieQueue');\n\n  if (movieQueue.length === 0) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>The queue is empty. Add all Harry Potter movies - you won't regret this‚ú®</p>\";\n    setTimeout(spinnerStop, 500);\n\n    return;\n  }\n\n  const moviesCards = movieQueue\n    .map(movie => {\n      return renderMoviesLibrary(movie);\n    })\n    .join('');\n  movieListEl.innerHTML = moviesCards;\n\n  setTimeout(spinnerStop, 500);\n}\n\nwatchedBtnEl.addEventListener('click', onWatchedBtnClick);\nqueueBtnEl.addEventListener('click', onQueueBtnClick);\n\n// localStorage functions\nfunction gettingItem(key) {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.log('Everyone makes mistakes, this is yours:', error.message);\n  }\n}*/\n","import { auth, writeUserDataQueue, writeUserDataWatch, currentFilmList, readAllUserData } from './authFireBase.js'\nimport { spinnerStart, spinnerStop } from './loader.js';\nimport { refs } from './refs';\nimport Notiflix from 'notiflix';\nimport { renderModal } from './render_modal';\nimport { onTrailerBtnClick } from './trailer';\nimport { all, AxiosHeaders } from 'axios';\nimport { fetchMovie } from './fetch_movie_details';\nimport TmdbAPI from './TMDB_API';\nimport { onWatchedBtnClick } from './my-library-watched-queue/my-library-watched-queue';//add\nimport { onQueueBtnClick } from './my-library-watched-queue/my-library-watched-queue';//add\nimport { async } from '@firebase/util';\n\n/*const {\n  allCardsSection,\n  modal,\n  overflow,\n  closeBtn,\n  innerModal,\n  body,\n  sectionLibrary,//add\n} = refs;\n// –ù–∞—Å—Ç—É–ø–Ω—ñ –¥–≤–∞ —Ä—è–¥–∫–∏ - –¥–æ–¥–∞–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –≤ –æ–±'—î–∫—Ç–∏ –∑ local storage –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–Ω–æ–ø–æ–∫ —ñ —Ä–æ–±–æ—Ç–∏\nlet queue = JSON.parse(localStorage.getItem('movieQueue')) || [];\nlet watched = JSON.parse(localStorage.getItem('movieWatched')) || [];\n// allCardsSection.addEventListener('click', showModal);\nsectionLibrary.addEventListener('click', showModal);\n\nfunction updateMoviesList() {\n  const allMoviesListFromStorage = localStorage.getItem('currentFilmList');\n  const allMoviesList = JSON.parse(allMoviesListFromStorage);\n  return allMoviesList;\n}\nexport async function showModal(e) {\n  if (e.target.nodeName === 'IMG' || e.target.nodeName === 'SPAN') {\n    modal.classList.remove('hidden-movie-modal');\n    overflow.classList.remove('hidden-movie-modal');\n    overflow.classList.add('overflow-height');\n\n    // allCardsSection.removeEventListener('click', showModal);\n    sectionLibrary.removeEventListener('click', showModal);\n\n    document.addEventListener('keydown', closeModalOnEsc);\n    closeBtn.addEventListener('click', closeModal);\n    overflow.addEventListener('click', closeModalOverflow);\n\n    const id =\n      e.target.nodeName === 'IMG'\n        ? e.target.dataset.id\n        : e.target.closest('li').dataset.id;\n    await createModal(id);\n    const top = window.scrollY;\n    body.style.position = 'fixed';\n    body.style.top = `-${top}px`;\n    // –î–∞–ª—ñ –≤ —Ü—ñ–π —Ñ—É–Ω–∫—Ü—ñ—ó—ó –Ω–∞–≤—ñ—Å–∏–ª–∞ –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤ –ø–æ–¥—ñ–π.\n    const watchedBtn = document.querySelector('.modal__btn-watched');\n    const queueBtn = document.querySelector('.modal__btn-queue');\n    const watchTrailerBtn = document.querySelector(\n      '.movie-modal__btn-watch-trailer'\n    );\n    watchedBtn.addEventListener('click', handleWatched);\n    queueBtn.addEventListener('click', handleQueued);\n    watchTrailerBtn.addEventListener('click', onTrailerBtnClick);\n  }\n}\nfunction closeModalOverflow(e) {\n  if (e.currentTarget === e.target) closeModal();\n}\nfunction closeModalOnEsc(e) {\n  if (e.code === 'Escape') closeModal();\n}\nfunction closeModal() {\n  modal.classList.add('hidden-movie-modal');\n  overflow.classList.add('hidden-movie-modal');\n  overflow.classList.remove('overflow-height');//add\n\n  // allCardsSection.addEventListener('click', showModal);\n  sectionLibrary.addEventListener('click', showModal);\n\n  document.removeEventListener('keydown', closeModal);\n  closeBtn.removeEventListener('click', closeModal);\n  overflow.removeEventListener('click', closeModalOverflow);\n  const top = body.style.top;\n  body.style.position = '';\n  body.style.top = '';\n  window.scrollTo(0, parseInt(top || '0') * -1);\n}\n\nasync function createModal(id) {\n  const currentList = updateMoviesList();\n  const rendered = await renderModal(currentList, id, watched, queue);\n\n  innerModal.innerHTML = rendered;\n}\n// –î–∞–ª—ñ —ñ –¥–æ –∫—ñ–Ω—Ü—è –π–¥—É—Ç—å –¥–≤–∞ –æ–±—Ä–æ–±–Ω–∏–∫–∏: watched i queue, —è–∫—ñ —Å–∞–º—ñ –≤–∏—Ä—ñ—à—É—é—Ç—å, –¥–æ–¥–∞–≤–∞—Ç–∏ —á–∏ –≤–∏–¥–∞–ª—è—Ç–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏\nasync function handleWatched(e) {\n  const modalEl = document.querySelector('.movie-modal__main');\n  const movie = {\n    poster_path: modalEl.dataset.poster,\n    title: modalEl.dataset.title,\n    genre_ids: modalEl.dataset.genres,\n    release_date: modalEl.dataset.date,\n    vote_average: modalEl.dataset.votes,\n    id: modalEl.dataset.id,\n  };\n  const isInWatched = watched.some(film => film.id === movie.id);\n  console.dir(e.target);\n  if (e.target.innerText === 'ADD TO WATCHED') {\n    if (!isInWatched) {\n      watched.push(movie);\n      localStorage.setItem('movieWatched', JSON.stringify(watched));\n      e.target.innerText = 'Remove from watched';\n      const saved = JSON.parse(localStorage.getItem('movieWatched'));\n      // e.target.addEventListener('click', removeFromWatched);\n      // e.target.removeEventListener('click', addToWatched);\n      Notiflix.Notify.success('Added to watched!');\n    }\n  } else if (e.target.innerText === 'REMOVE FROM WATCHED') {\n    watched = watched.filter(film => film.id !== movie.id);\n    localStorage.setItem('movieWatched', JSON.stringify(watched));\n    e.target.innerText = 'Add to watched';\n    onWatchedBtnClick();\n\n    // e.target.removeEventListener('click', removeFromWatched);\n    // e.target.addEventListener('click', addToWatched);\n    Notiflix.Notify.success('Removed from watched!');\n  }\n}\nasync function handleQueued(e) {\n  const modalEl = document.querySelector('.movie-modal__main');\n  const movie = {\n    poster_path: modalEl.dataset.poster,\n    title: modalEl.dataset.title,\n    genre_ids: modalEl.dataset.genres,\n    release_date: modalEl.dataset.date,\n    vote_average: modalEl.dataset.votes,\n    id: modalEl.dataset.id,\n  };\n  const isInQueued = queue.some(film => film.id === movie.id);\n  console.dir(e.target);\n  if (e.target.innerText === 'ADD TO QUEUE') {\n    if (!isInQueued) {\n      queue.push(movie);\n      localStorage.setItem('movieQueue', JSON.stringify(queue));\n      e.target.innerText = 'Remove from queue';\n      // e.target.addEventListener('click', removeFromWatched);\n      // e.target.removeEventListener('click', addToWatched);\n      Notiflix.Notify.success('Added to queue!');\n    }\n  } else if (e.target.innerText === 'REMOVE FROM QUEUE') {\n    queue = queue.filter(film => film.id !== movie.id);\n    localStorage.setItem('movieQueue', JSON.stringify(queue));\n    e.target.innerText = 'Add to queue';\n    onQueueBtnClick();\n    // e.target.removeEventListener('click', removeFromWatched);\n    // e.target.addEventListener('click', addToWatched);\n    Notiflix.Notify.success('Removed from queue!');\n  }\n}*/\n\n\n\n\n\nconst { allCardsSection, modal, overflow, closeBtn, innerModal, body, sectionLibrary } = refs;\n// –ù–∞—Å—Ç—É–ø–Ω—ñ –¥–≤–∞ —Ä—è–¥–∫–∏ - –¥–æ–¥–∞–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –≤ –æ–±'—î–∫—Ç–∏ –∑ local storage –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–Ω–æ–ø–æ–∫ —ñ —Ä–æ–±–æ—Ç–∏\nlet queue;\nlet watched;\nasync function updateVar() {\n  if (auth.currentUser === null) {\n    console.log(auth);\n    queue = [];\n    watched = [];\n  }\n  else {\n    const q = await readAllUserData(auth.currentUser.uid);\n    const w = await readAllUserData(auth.currentUser.uid)\n    queue = q.userDataQueue || [];\n    watched = w.userDataWatch || [];\n  }\n\n}\n//\n\nsetTimeout(() => {\n  updateVar();\n}, 2500)\n\nsectionLibrary.addEventListener('click', showModal);\n\nasync function updateMoviesList() {\n\n  if (auth.currentUser === null) {\n    const allMoviesListFromStorage = localStorage.getItem('currentFilmList');\n    const allMoviesList = JSON.parse(allMoviesListFromStorage);\n    return allMoviesList;\n  }\n  else {\n    try {\n      const allMoviesListFromStorage = await currentFilmList(auth.currentUser.uid);\n      console.log(allMoviesListFromStorage);\n      const allMoviesList = allMoviesListFromStorage.currentFilmList || [];\n      return allMoviesList;\n    }\n    catch {\n      return [];\n    }\n  }\n\n}\nexport async function showModal(e) {\n  if (e.target.nodeName === 'IMG' || e.target.nodeName === 'SPAN') {\n    modal.classList.remove('hidden-movie-modal');\n    overflow.classList.remove('hidden-movie-modal');\n    overflow.classList.add('overflow-height');\n    sectionLibrary.removeEventListener('click', showModal);\n    document.addEventListener('keydown', closeModalOnEsc);\n    closeBtn.addEventListener('click', closeModal);\n    overflow.addEventListener('click', closeModalOverflow);\n\n    const id =\n      e.target.nodeName === 'IMG'\n        ? e.target.dataset.id\n        : e.target.closest('li').dataset.id;\n    await createModal(id);\n    const top = window.scrollY;\n    body.style.position = 'fixed';\n    body.style.top = `-${top}px`;\n    // –î–∞–ª—ñ –≤ —Ü—ñ–π —Ñ—É–Ω–∫—Ü—ñ—ó—ó –Ω–∞–≤—ñ—Å–∏–ª–∞ –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤ –ø–æ–¥—ñ–π.\n    const watchedBtn = document.querySelector('.modal__btn-watched');\n    const queueBtn = document.querySelector('.modal__btn-queue');\n    const watchTrailerBtn = document.querySelector(\n      '.movie-modal__btn-watch-trailer'\n    );\n    if (auth.currentUser !== null) {\n      watchedBtn.addEventListener('click', handleWatched);\n      queueBtn.addEventListener('click', handleQueued);\n\n    }\n    else {\n      watchedBtn.setAttribute(\"disabled\", \"disabled\");\n      queueBtn.setAttribute(\"disabled\", \"disabled\");\n    }\n    watchTrailerBtn.addEventListener('click', onTrailerBtnClick);\n  }\n}\nfunction closeModalOverflow(e) {\n  if (e.currentTarget === e.target) closeModal();\n}\nfunction closeModalOnEsc(e) {\n  if (e.code === 'Escape') closeModal();\n}\nfunction closeModal() {\n  modal.classList.add('hidden-movie-modal');\n  overflow.classList.add('hidden-movie-modal');\n  overflow.classList.remove('overflow-height');\n  sectionLibrary.addEventListener('click', showModal);\n  document.removeEventListener('keydown', closeModal);\n  closeBtn.removeEventListener('click', closeModal);\n  overflow.removeEventListener('click', closeModalOverflow);\n  const top = body.style.top;\n  body.style.position = '';\n  body.style.top = '';\n  window.scrollTo(0, parseInt(top || '0') * -1);\n}\n\nasync function createModal(id) {\n\n  if (auth.currentUser === null) {\n    const currentList = updateMoviesList();\n    const rendered = await renderModal(currentList, id, watched, queue);\n    innerModal.innerHTML = rendered;\n  }\n  else {\n    await updateVar();\n    const currentList = await updateMoviesList();\n    const rendered = await renderModal(currentList, id, watched, queue);\n    innerModal.innerHTML = rendered;\n  }\n\n\n\n}\n\nasync function handleWatched(e) {\n  const modalEl = document.querySelector('.movie-modal__main');\n\n  const movie = {\n    poster_path: modalEl.dataset.poster,\n    title: modalEl.dataset.title,\n    genre_ids: modalEl.dataset.genres,\n    release_date: modalEl.dataset.date,\n    vote_average: modalEl.dataset.votes,\n    id: modalEl.dataset.id,\n  };\n\n  const isInWatched = watched.some(film => film.id === movie.id);\n\n\n  if (e.target.innerText === 'ADD TO WATCHED') {\n    if (!isInWatched) {\n      watched.push(movie);\n      if (auth.currentUser === null) {\n        localStorage.setItem('movieWatched', JSON.stringify(watched));\n        e.target.innerText = 'Remove from watched';\n        const saved = JSON.parse(localStorage.getItem('movieWatched'));\n      }\n      else {\n        await writeUserDataWatch(auth.currentUser.uid, watched);\n        e.target.innerText = 'Remove from watched';\n        const w = await readAllUserData(auth.currentUser.uid)\n        const saved = w.userDataWatch || [];\n      }\n\n      onWatchedBtnClick();\n      Notiflix.Notify.success('Added to watched!');\n    }\n  } else if (e.target.innerText === 'REMOVE FROM WATCHED') {\n    watched = watched.filter(film => film.id !== movie.id);\n    if (auth.currentUser === null) {\n      localStorage.setItem('movieWatched', JSON.stringify(watched));\n    }\n    else {\n      await writeUserDataWatch(auth.currentUser.uid, watched);\n    }\n    e.target.innerText = 'Add to watched';\n    onWatchedBtnClick();\n    Notiflix.Notify.success('Removed from watched!');\n  }\n}\nasync function handleQueued(e) {\n  const modalEl = document.querySelector('.movie-modal__main');\n\n  const movie = {\n    poster_path: modalEl.dataset.poster,\n    title: modalEl.dataset.title,\n    genre_ids: modalEl.dataset.genres,\n    release_date: modalEl.dataset.date,\n    vote_average: modalEl.dataset.votes,\n    id: modalEl.dataset.id,\n  };\n\n\n  const isInQueued = queue.some(film => film.id === movie.id);\n  if (e.target.innerText === 'ADD TO QUEUE') {\n    if (!isInQueued) {\n      queue.push(movie);\n      if (auth.currentUser === null) localStorage.setItem('movieQueue', JSON.stringify(queue));\n      else {\n        await writeUserDataQueue(auth.currentUser.uid, queue);\n      }\n      e.target.innerText = 'Remove from queue';\n      onQueueBtnClick();\n      Notiflix.Notify.success('Added to queue!');\n    }\n  } else if (e.target.innerText === 'REMOVE FROM QUEUE') {\n    queue = queue.filter(film => film.id !== movie.id);\n    if (auth.currentUser === null) {\n      localStorage.setItem('movieQueue', JSON.stringify(queue));\n    }\n    else {\n      await writeUserDataQueue(auth.currentUser.uid, queue);\n    }\n\n    e.target.innerText = 'Add to queue';\n    onQueueBtnClick();\n    Notiflix.Notify.success('Removed from queue!');\n  }\n}\n","import './js/authFireBaseLibrary.js';\nimport './js/openModalWindow.js';\nimport './js/my-library-watched-queue/my-library-watched-queue';\nimport './js/dark-mode';\nimport './js/footer-modal';\nimport { spinnerStart, spinnerStop } from './js/loader';\nspinnerStart();\nsetTimeout(spinnerStop, 1000);\nimport './js/scroll_to_top';\nimport './js/movie_modal-library.js';\nimport './js/openModalWindow.js';\n"],"names":["parcelRequire","$30dc2ddc0d4b38da$var$watchedBtnEl","document","querySelector","$30dc2ddc0d4b38da$var$queueBtnEl","$30dc2ddc0d4b38da$var$movieListEl","async","$30dc2ddc0d4b38da$export$852eb21c65e590aa","$gjiCh","spinnerStart","setTimeout","spinnerStop","style","background","borderColor","$5rZAK","auth","currentUser","innerHTML","movieWatched","readAllUserData","uid","undefined","userDataWatch","Object","keys","length","moviesCards","map","movie","$7bdJN","renderMoviesLibrary","join","$30dc2ddc0d4b38da$export$47c64e1cb6fdbeb7","movieQueue","userDataQueue","page","Math","floor","random","IMG_PATH","films","$2Opyx","default","markup","results","id","poster_path","title","overview","error","console","log","$30dc2ddc0d4b38da$var$defaultLibrary","addEventListener","allCardsSection","$f9640db34d3647b8$var$allCardsSection","modal","$f9640db34d3647b8$var$modal","overflow","$f9640db34d3647b8$var$overflow","closeBtn","$f9640db34d3647b8$var$closeBtn","innerModal","$f9640db34d3647b8$var$innerModal","body","$f9640db34d3647b8$var$body","sectionLibrary","$f9640db34d3647b8$var$sectionLibrary","$krGWQ","refs","$f9640db34d3647b8$var$queue","$f9640db34d3647b8$var$watched","$f9640db34d3647b8$var$updateVar","q","w","$f9640db34d3647b8$var$updateMoviesList","allMoviesListFromStorage","localStorage","getItem","JSON","parse","currentFilmList","$f9640db34d3647b8$export$d7e8d4d4450c819c","e","target","nodeName","classList","remove","add","removeEventListener","$f9640db34d3647b8$var$closeModalOnEsc","$f9640db34d3647b8$var$closeModal","$f9640db34d3647b8$var$closeModalOverflow","dataset","closest","currentList","rendered","$1jYKa","renderModal","$f9640db34d3647b8$var$createModal","top","window","scrollY","position","watchedBtn","queueBtn","watchTrailerBtn","$f9640db34d3647b8$var$handleWatched","$f9640db34d3647b8$var$handleQueued","setAttribute","$37v9V","onTrailerBtnClick","currentTarget","code","scrollTo","parseInt","modalEl","poster","genre_ids","genres","release_date","date","vote_average","votes","isInWatched","some","film","innerText","push","setItem","stringify","writeUserDataWatch","$parcel$interopDefault","$7Y9D8","Notify","success","filter","isInQueued","writeUserDataQueue"],"version":3,"file":"library.4b8f2160.js.map"}