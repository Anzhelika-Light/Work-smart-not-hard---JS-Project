function e(e,t,r,o){Object.defineProperty(e,t,{get:r,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},a=r.parcelRequired7c6;null==a&&((a=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return o[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},r.parcelRequired7c6=a),a.register("kyEFX",(function(t,r){var o,n;e(t.exports,"register",(function(){return o}),(function(e){return o=e})),e(t.exports,"resolve",(function(){return n}),(function(e){return n=e}));var a={};o=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)a[t[r]]=e[t[r]]},n=function(e){var t=a[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),a("kyEFX").register(JSON.parse('{"1zJhX":"library.aa92c766.js","ej0t2":"empty-poster.88e9f0bc.jpg","5UbS1":"index.9bd496b7.css","eM9ss":"library.e907e088.js"}')),a("gKkQl"),a("eyjy7"),a("7Y9D8"),a("jAzyG"),a("5rZAK");a("9kkEh"),a("7Y9D8");var i;i=new URL(a("kyEFX").resolve("ej0t2"),import.meta.url).toString();function s(e){const{poster_path:r,title:o,genre_ids:n,release_date:a,vote_average:s,id:l}=e;let d=`https://image.tmdb.org/t/p/original${r}`,c=`${a.slice(0,4)}`;d=r||function(e){let t=new Image;t.addEventListener("load",(()=>!0)),t.addEventListener("error",(()=>!1)),t.src=e}(d)?`https://image.tmdb.org/t/p/original${r}`:`${t(i)}`,a||(c="-");return`\n\t<li class='trending-gallery__item' data-id='${l}'>\n    <img src="${d}" alt="The poster of ${o} film" class="library-gallery__image" data-id='${l}'/>\n    <div class="trending-gallery__wrapper">\n    \t<h3 class='trending-gallery__title' data-id='${l}'><span class="title-modal-open">${o}</span></h3>\n    \t<p class='trending-gallery__info'>${n} | <span class='movie-year'>${c}</span> <span class='movie-rating'>${Number(s).toFixed(1)}</span></p>\n    </div>\n  </li>\n\t`}var l=a("gjiCh"),d=a("2Opyx");const c=document.querySelector(".js-library-btn--watched"),u=document.querySelector(".js-library-btn--queue"),g=document.querySelector(".movie-list");function m(e){try{const t=localStorage.getItem(e);if(null===t)return;return JSON.parse(t)}catch(e){console.log("Everyone makes mistakes, this is yours:",e.message)}}!async function(){let e=Math.ceil(1),t=Math.floor(100),r=Math.floor(Math.random()*(t-e+1)+e);try{const e="https://image.tmdb.org/t/p/original";g.innerHTML="";const t=await(0,d.default)(r),o=`<h3 class='library-gallery-recomend'>RECOMMENDATIONS</h3><div class='library-gallery__default'><img class='library-gallery__default-poster' src=${e}${t.results[1].poster_path}>\n    <div><p class='library-gallery__default__title'>${t.results[1].title}</p>\n    <p class='library-gallery__default-overview'>${t.results[1].overview}</p></div>\n    </div>\n    \n    <div class='library-gallery__default'><img class='library-gallery__default-poster' src=${e}${t.results[2].poster_path}>\n    <div><p class='library-gallery__default__title'>${t.results[2].title}</p>\n    <p class='library-gallery__default-overview'>${t.results[2].overview}</p></div>\n    </div>\n    \n    <div class='library-gallery__default'><img class='library-gallery__default-poster' src=${e}${t.results[3].poster_path}>\n    <div><p class='library-gallery__default__title'>${t.results[3].title}</p>\n    <p class='library-gallery__default-overview'>${t.results[3].overview}</p></div>\n    </div>`;g.innerHTML=o}catch(e){console.log(e)}}(),c.addEventListener("click",(function(){(0,l.spinnerStart)();const e=m("movieWatched");if(console.log(e),0===e.length)return g.innerHTML="<p class='no-movies'>It seems you haven't watched any movie. You should try, it's funðŸŽ­</p>",void setTimeout(l.spinnerStop,500);const t=e.map((e=>s(e))).join("");g.innerHTML=t,setTimeout(l.spinnerStop,500)})),u.addEventListener("click",(function(){(0,l.spinnerStart)();const e=m("movieQueue");if(0===e.length)return g.innerHTML="<p class='no-movies'>The queue is empty. Add all Harry Potter movies - you won't regret thisâœ¨</p>",void setTimeout(l.spinnerStop,500);const t=e.map((e=>s(e))).join("");g.innerHTML=t,setTimeout(l.spinnerStop,500)})),a("ak03H"),a("6HA5D");l=a("gjiCh");a("kMp2Z");var v=a("krGWQ"),p=a("7Y9D8"),y=a("1jYKa"),f=a("37v9V");a("gCEU8"),a("8ROYx");const{allCardsSection:_,modal:h,overflow:b,closeBtn:E,innerModal:S,body:w,sectionLibrary:L}=v.refs;let T=JSON.parse(localStorage.getItem("movieQueue"))||[],k=JSON.parse(localStorage.getItem("movieWatched"))||[];async function $(e){if("IMG"===e.target.nodeName||"SPAN"===e.target.nodeName){h.classList.remove("hidden-movie-modal"),b.classList.remove("hidden-movie-modal"),b.classList.add("overflow-height"),L.removeEventListener("click",$),document.addEventListener("keydown",O),E.addEventListener("click",N),b.addEventListener("click",M);const t="IMG"===e.target.nodeName?e.target.dataset.id:e.target.closest("li").dataset.id;await async function(e){const t=function(){const e=localStorage.getItem("currentFilmList");return JSON.parse(e)}(),r=await(0,y.renderModal)(t,e,k,T);S.innerHTML=r}(t);const r=window.scrollY;w.style.position="fixed",w.style.top=`-${r}px`;const o=document.querySelector(".modal__btn-watched"),n=document.querySelector(".modal__btn-queue"),a=document.querySelector(".movie-modal__btn-watch-trailer");o.addEventListener("click",x),n.addEventListener("click",H),a.addEventListener("click",f.onTrailerBtnClick)}}function M(e){e.currentTarget===e.target&&N()}function O(e){"Escape"===e.code&&N()}function N(){h.classList.add("hidden-movie-modal"),b.classList.add("hidden-movie-modal"),b.classList.remove("overflow-height"),L.addEventListener("click",$),document.removeEventListener("keydown",N),E.removeEventListener("click",N),b.removeEventListener("click",M);const e=w.style.top;w.style.position="",w.style.top="",window.scrollTo(0,-1*parseInt(e||"0"))}async function x(e){const r=document.querySelector(".movie-modal__main");console.log("modalEl",r.dataset);const o={poster_path:r.dataset.poster,title:r.dataset.title,genre_ids:r.dataset.genres,release_date:r.dataset.date,vote_average:r.dataset.votes,id:r.dataset.id};console.log("movie",o);const n=k.some((e=>e.id===o.id));if(console.log("inInWatched",n),console.dir(e.target),"ADD TO WATCHED"===e.target.innerText){if(!n){k.push(o),localStorage.setItem("movieWatched",JSON.stringify(k)),e.target.innerText="Remove from watched",console.log("movie",o),console.log("watched",k);const r=JSON.parse(localStorage.getItem("movieWatched"));console.log("saved",r),t(p).Notify.success("Added to watched!")}}else"REMOVE FROM WATCHED"===e.target.innerText&&(k=k.filter((e=>e.id!==o.id)),localStorage.setItem("movieWatched",JSON.stringify(k)),e.target.innerText="Add to watched",t(p).Notify.success("Removed from watched!"))}async function H(e){const r=document.querySelector(".movie-modal__main");console.log("modalEl",r.dataset);const o={poster_path:r.dataset.poster,title:r.dataset.title,genre_ids:r.dataset.genres,release_date:r.dataset.date,vote_average:r.dataset.votes,id:r.dataset.id};console.log("movie",o);const n=T.some((e=>e.id===o.id));console.log(n),console.dir(e.target),"ADD TO QUEUE"===e.target.innerText?n||(T.push(o),localStorage.setItem("movieQueue",JSON.stringify(T)),e.target.innerText="Remove from queue",t(p).Notify.success("Added to queue!")):"REMOVE FROM QUEUE"===e.target.innerText&&(T=T.filter((e=>e.id!==o.id)),localStorage.setItem("movieQueue",JSON.stringify(T)),e.target.innerText="Add to queue",t(p).Notify.success("Removed from queue!"))}L.addEventListener("click",$),a("9kkEh"),(0,l.spinnerStart)(),setTimeout(l.spinnerStop,1e3);
//# sourceMappingURL=library.aa92c766.js.map
