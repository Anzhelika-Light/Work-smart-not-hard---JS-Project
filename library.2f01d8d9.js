function e(e,t,r,o){Object.defineProperty(e,t,{get:r,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},s=r.parcelRequired7c6;null==s&&((s=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return o[e]=r,t.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},r.parcelRequired7c6=s),s.register("kyEFX",(function(t,r){var o,n;e(t.exports,"register",(function(){return o}),(function(e){return o=e})),e(t.exports,"resolve",(function(){return n}),(function(e){return n=e}));var s={};o=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)s[t[r]]=e[t[r]]},n=function(e){var t=s[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),s("kyEFX").register(JSON.parse('{"1zJhX":"library.2f01d8d9.js","ej0t2":"empty-poster.88e9f0bc.jpg","5UbS1":"index.8a52077a.css","eM9ss":"library.9890f2d5.js"}')),s("gKkQl"),s("eyjy7"),s("7Y9D8"),s("jAzyG"),s("5rZAK");s("9kkEh"),s("7Y9D8");var i;i=new URL(s("kyEFX").resolve("ej0t2"),import.meta.url).toString();function a(e){const{poster_path:r,title:o,genre_ids:n,release_date:s,vote_average:a,id:l}=e;let d=`https://image.tmdb.org/t/p/original${r}`,c=`${s.slice(0,4)}`;d=r||function(e){let t=new Image;t.addEventListener("load",(()=>!0)),t.addEventListener("error",(()=>!1)),t.src=e}(d)?`https://image.tmdb.org/t/p/original${r}`:`${t(i)}`,s||(c="-");const u=n.split(",");let g=[];u.length>2?(g.push(u[0]),g.push(u[1]),g.push("Other"),console.log("genres:",g)):2===u.length?(g.push(u[0]),g.push(u[1]),console.log("genres:",g)):1===u.length&&(g.push(u[0]),console.log("genres:",g));const m=Number(a).toFixed(1);return`\n\t<li class='trending-gallery__item' data-id='${l}'>\n  \n    <img src="${d}" alt="The poster of ${o} film" class="library-gallery__image" data-id='${l}'/>\n    <div class="trending-gallery__wrapper">\n    \t<h3 class='trending-gallery__title' data-id='${l}'><span class="title-modal-open">${o}</span></h3>\n    \t<p class='trending-gallery__info'>${g.join(", ")} | <span class='movie-year'>${c}</span> <span class='movie-rating'>${m}</span></p>\n    </div>\n    \n  </li>\n\t`}var l=s("gjiCh"),d=s("2Opyx");const c=document.querySelector(".js-library-btn--watched"),u=document.querySelector(".js-library-btn--queue"),g=document.querySelector(".movie-list");function m(){(0,l.spinnerStart)();const e=v("movieWatched");if(console.log(e),void 0===e)return g.innerHTML="<p class='no-movies'>It seems you haven't watched any movie. You should try, it's funðŸŽ­</p>",void setTimeout(l.spinnerStop,500);if(0===e.length)return g.innerHTML="<p class='no-movies'>It seems you haven't watched any movie. You should try, it's funðŸŽ­</p>",void setTimeout(l.spinnerStop,500);const t=e.map((e=>a(e))).join("");g.innerHTML=t,setTimeout(l.spinnerStop,500)}function p(){(0,l.spinnerStart)();const e=v("movieQueue");if(void 0===e)return g.innerHTML="<p class='no-movies'>The queue is empty. Add all Harry Potter movies - you won't regret thisâœ¨</p>",void setTimeout(l.spinnerStop,500);if(0===e.length)return g.innerHTML="<p class='no-movies'>The queue is empty. Add all Harry Potter movies - you won't regret thisâœ¨</p>",void setTimeout(l.spinnerStop,500);const t=e.map((e=>a(e))).join("");g.innerHTML=t,setTimeout(l.spinnerStop,500)}function v(e){try{const t=localStorage.getItem(e);if(console.log(t),null===t)return;return JSON.parse(t)}catch(e){console.log("Everyone makes mistakes, this is yours:",e.message)}}!async function(){let e=Math.ceil(1),t=Math.floor(100),r=Math.floor(Math.random()*(t-e+1)+e);try{const e="https://image.tmdb.org/t/p/original";g.innerHTML="";const t=await(0,d.default)(r),o=`<h3 class='library-gallery-recomend'>RECOMMENDATIONS</h3><div class='library-gallery__default'><img class='library-gallery__default-poster' data-id='${t.results[1].id}' src=${e}${t.results[1].poster_path}>\n    <div><p class='library-gallery__default__title'>${t.results[1].title}</p>\n    <p class='library-gallery__default-overview'>${t.results[1].overview}</p></div>\n    </div>\n    \n    <div class='library-gallery__default'><img class='library-gallery__default-poster' src=${e}${t.results[2].poster_path} data-id='${t.results[2].id}'>\n    <div><p class='library-gallery__default__title'>${t.results[2].title}</p>\n    <p class='library-gallery__default-overview'>${t.results[2].overview}</p></div>\n    </div>\n    \n    <div class='library-gallery__default'><img class='library-gallery__default-poster' src=${e}${t.results[3].poster_path} data-id='${t.results[3].id}'>\n    <div><p class='library-gallery__default__title'>${t.results[3].title}</p>\n    <p class='library-gallery__default-overview'>${t.results[3].overview}</p></div>\n    </div>`;g.innerHTML=o}catch(e){console.log(e)}}(),c.addEventListener("click",m),u.addEventListener("click",p),s("ak03H"),s("6HA5D");l=s("gjiCh");s("kMp2Z");var y=s("krGWQ"),f=s("7Y9D8"),h=s("1jYKa"),_=s("37v9V");s("gCEU8"),s("8ROYx");const{allCardsSection:S,modal:b,overflow:E,closeBtn:w,innerModal:T,body:L,sectionLibrary:k}=y.refs;let $=JSON.parse(localStorage.getItem("movieQueue"))||[],M=JSON.parse(localStorage.getItem("movieWatched"))||[];async function O(e){if("IMG"===e.target.nodeName||"SPAN"===e.target.nodeName){b.classList.remove("hidden-movie-modal"),E.classList.remove("hidden-movie-modal"),E.classList.add("overflow-height"),k.removeEventListener("click",O),document.addEventListener("keydown",N),w.addEventListener("click",x),E.addEventListener("click",H);const t="IMG"===e.target.nodeName?e.target.dataset.id:e.target.closest("li").dataset.id;await async function(e){const t=function(){const e=localStorage.getItem("currentFilmList");return JSON.parse(e)}(),r=await(0,h.renderModal)(t,e,M,$);T.innerHTML=r}(t);const r=window.scrollY;L.style.position="fixed",L.style.top=`-${r}px`;const o=document.querySelector(".modal__btn-watched"),n=document.querySelector(".modal__btn-queue"),s=document.querySelector(".movie-modal__btn-watch-trailer");o.addEventListener("click",A),n.addEventListener("click",q),s.addEventListener("click",_.onTrailerBtnClick)}}function H(e){e.currentTarget===e.target&&x()}function N(e){"Escape"===e.code&&x()}function x(){b.classList.add("hidden-movie-modal"),E.classList.add("hidden-movie-modal"),E.classList.remove("overflow-height"),k.addEventListener("click",O),document.removeEventListener("keydown",x),w.removeEventListener("click",x),E.removeEventListener("click",H);const e=L.style.top;L.style.position="",L.style.top="",window.scrollTo(0,-1*parseInt(e||"0"))}async function A(e){const r=document.querySelector(".movie-modal__main");console.log("modalEl",r.dataset);const o={poster_path:r.dataset.poster,title:r.dataset.title,genre_ids:r.dataset.genres,release_date:r.dataset.date,vote_average:r.dataset.votes,id:r.dataset.id};console.log("movie",o);const n=M.some((e=>e.id===o.id));if(console.log("inInWatched",n),console.dir(e.target),"ADD TO WATCHED"===e.target.innerText){if(!n){M.push(o),localStorage.setItem("movieWatched",JSON.stringify(M)),e.target.innerText="Remove from watched",console.log("movie",o),console.log("watched",M);const r=JSON.parse(localStorage.getItem("movieWatched"));console.log("saved",r),t(f).Notify.success("Added to watched!")}}else"REMOVE FROM WATCHED"===e.target.innerText&&(M=M.filter((e=>e.id!==o.id)),localStorage.setItem("movieWatched",JSON.stringify(M)),e.target.innerText="Add to watched",m(),t(f).Notify.success("Removed from watched!"))}async function q(e){const r=document.querySelector(".movie-modal__main");console.log("modalEl",r.dataset);const o={poster_path:r.dataset.poster,title:r.dataset.title,genre_ids:r.dataset.genres,release_date:r.dataset.date,vote_average:r.dataset.votes,id:r.dataset.id};console.log("movie",o);const n=$.some((e=>e.id===o.id));console.log(n),console.dir(e.target),"ADD TO QUEUE"===e.target.innerText?n||($.push(o),localStorage.setItem("movieQueue",JSON.stringify($)),e.target.innerText="Remove from queue",t(f).Notify.success("Added to queue!")):"REMOVE FROM QUEUE"===e.target.innerText&&($=$.filter((e=>e.id!==o.id)),localStorage.setItem("movieQueue",JSON.stringify($)),e.target.innerText="Add to queue",p(),t(f).Notify.success("Removed from queue!"))}k.addEventListener("click",O),s("9kkEh"),(0,l.spinnerStart)(),setTimeout(l.spinnerStop,1e3);
//# sourceMappingURL=library.2f01d8d9.js.map
